好的，这是第二份文档，专门介绍如何使用 WebApp 按钮。

# WebApp 按钮使用指南

WebApp 按钮是 Telegram 提供的一项强大功能，它允许你在机器人内部直接打开一个网页应用，而不是跳转到外部浏览器。这为用户提供了无缝、集成的体验，非常适合用于展示复杂的数据、填写表单、进行配置，甚至是玩游戏。

本插件让你能够轻松地创建和管理这些 WebApp 按钮。（目前不完善，没有经过测试）

## 核心概念：定义与链接

与“动作”按钮类似，创建一个 WebApp 按钮也分为两个步骤：

1.  **创建 WebApp 定义 (Definition)**:
    *   首先，你需要在 WebUI 的 `WebApp` 标签页中定义你的网页应用。
    *   这就像是在一个集中的地方管理你所有的“网页书签”。每个定义都包含一个名称（方便你在后台识别）和一个指向实际网页的 URL。

2.  **创建按钮并链接**:
    *   然后，在“菜单与布局”中创建一个新按钮。
    *   将这个按钮的类型设置为 `WebApp`。
    *   从下拉列表中选择你刚刚创建的 WebApp 定义，将它们**链接**起来。

这种分离的设计使得管理变得非常高效：如果你需要更新一个 WebApp 的 URL，你只需要修改那一个 WebApp 定义即可，所有链接到它的按钮都会自动更新，无需逐个修改。

## Step-by-Step 实例：创建一个“开发文档”按钮

让我们通过一个实例，创建一个点击后可以在 Telegram 内部打开插件开发文档的按钮。

### 第 1 步：在 WebUI 中创建 WebApp 定义

1.  进入插件的 WebUI，切换到 **"WebApp"** 标签页。
2.  点击 **"新增 WebApp"** 按钮。一个新的 WebApp 编辑框会出现。
3.  填写信息：
    *   **名称 (Name)**: `开发文档` (这个名字只在 WebUI 中显示，方便你管理)。
    *   **描述 (Description)**: `AstrBot 插件开发文档` (可选)。
    *   **URL**: `https://docs.astrbot.com/plugin/` (这是实际要加载的网页地址)。
    

### 第 2 步：创建按钮并选择 WebApp

1.  切换到 **"菜单与布局"** 标签页。
2.  在右侧的 **"未分配的按钮"** 区域，点击 **"创建新按钮"**。
3.  在弹出的编辑窗口中：
    *   **显示文本**: `查看开发文档`。
    *   **类型**: 从下拉菜单中选择 **`WebApp`**。
    *   **WebApp**: 一个新的下拉菜单会随即出现。在这里选择我们刚刚创建的 `开发文档`。

### 第 3 步：添加到菜单并保存

1.  点击 **"创建按钮"**。
2.  将新创建的 `查看开发文档` 按钮从右侧的“未分配”区域 **拖拽** 到左侧 `root` 菜单的布局中。
3.  点击页面右上角的 **"保存全部"** 按钮。

### 第 4 步：在 Telegram 中体验

1.  回到你的 Telegram 聊天，发送 `/menu` 指令。
2.  点击你刚刚创建的 **[ 查看开发文档 ]** 按钮。
3.  你会看到，屏幕下方会平滑地弹出一个窗口，并直接在其中加载了 AstrBot 的开发文档页面。你可以像在浏览器中一样滚动和浏览，但全程都没有离开 Telegram 应用。

## 进阶用法

*   **动态 URL**: WebApp 的 URL 不仅仅是静态的。你可以结合“动作 (Action)”按钮，通过 API 调用生成一个动态的、针对特定用户的 URL (例如，一个包含用户 ID 的登录链接)，然后使用动作的 `button_overrides` 功能，临时将一个按钮变为指向这个动态 URL 的 WebApp 按钮。
*   **与机器人交互**: 一个专门为 Telegram 设计的 WebApp 可以通过 [Telegram Web App SDK](https://core.telegram.org/bots/webapps) 与你的机器人进行双向通信。这意味着用户可以在网页中进行操作，然后将结果数据发送回机器人进行处理。这为实现复杂的用户交互提供了无限可能。