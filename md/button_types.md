
# 按钮类型参考指南

在 WebUI 中创建或编辑按钮时，核心的配置之一就是选择它的 **“类型 (Type)”**。类型决定了当用户点击这个按钮时，会发生什么。

本指南将详细解释每一种**可通过 WebUI 配置**的按钮类型。

---

## 目录

1.  [指令 (Command)](#1-指令-command)
2.  [链接 (URL)](#2-链接-url)
3.  [子菜单 (Submenu)](#3-子菜单-submenu)
4.  [返回 (Back)](#4-返回-back)
5.  [动作 (Action)](#5-动作-action)
6.  [WebApp](#6-webapp)
7.  [快速参考表](#7-快速参考表)

---

### 1. 指令 (Command)

*   **功能**: 模拟用户发送一条指令给机器人。这是最基础、最常用的按钮类型。
*   **配置字段**: `指令内容 (Command Content)`
*   **说明**: 你在这里填写的内容（**不带斜杠 /**）会作为一条指令被机器人处理。它会经过 AstrBot 的所有指令匹配流程，就像用户亲自输入一样。
*   **使用场景**:
    *   将常用但很长的指令做成快捷按钮。
    *   为新手用户提供一个可视化的指令入口。
*   **示例**:
    *   **指令内容**: `weather Beijing`
    *   **效果**: 点击按钮后，等同于用户发送了 `/weather Beijing`。

### 2. 链接 (URL)

*   **功能**: 引导用户打开一个网页链接。
*   **配置字段**: `链接URL (Link URL)`
*   **说明**: 当用户点击按钮时，Telegram 会弹出一个确认窗口，询问是否要打开这个链接。这个链接可以是常规的 `https://` 网页，也可以是特殊的 `tg://` 协议链接。
*   **使用场景**:
    *   链接到你的个人主页、项目仓库或官方网站。
    *   使用 `tg://` 链接实现 Telegram 应用内的跳转（如打开某个频道、添加贴纸等）。
*   **示例**:
    *   **链接URL**: `https://github.com/AstrBotDevs/AstrBot`
    *   **效果**: 提示用户是否要打开 AstrBot 的 GitHub 页面。
    *   **高级用法**: 查阅 **[🔗 Telegram `tg://` 协议链接大全](./tg_links.md)** 来实现更多功能。

### 3. 子菜单 (Submenu)

*   **功能**: 在当前消息处，切换到另一个你已经创建好的菜单。
*   **配置字段**: `目标菜单 (Target Menu)`
*   **说明**: 这是构建多层级、结构化菜单的关键。你可以创建一个主菜单，其中某些按钮点击后会进入功能更细化的子菜单。
*   **使用场景**:
    *   主菜单有一个“工具”按钮，点击后进入包含“天气查询”、“汇率转换”等按钮的“工具”子菜单。
*   **示例**:
    *   **目标菜单**: `menu_tools` (你创建的工具菜单的 ID)
    *   **效果**: 点击按钮后，原有的按钮布局会切换成 `menu_tools` 菜单中定义的布局。

### 4. 返回 (Back)

*   **功能**: 与“子菜单”功能完全相同，都是切换到指定的菜单。
*   **配置字段**: `目标菜单 (Target Menu)`
*   **说明**: “返回”按钮在功能上是“子菜单”的一个**别名**，主要用于提升配置时的**语义清晰度**。当你希望在子菜单中提供一个返回上一级的功能时，使用这个类型能让你和他人更容易理解按钮的意图。
*   **使用场景**:
    *   在“工具”子菜单中，放置一个“返回”按钮，用于回到主菜单。
*   **示例**:
    *   **目标菜单**: `root` (主菜单的默认 ID)
    *   **效果**: 点击按钮后，从当前子菜单切换回主菜单。

### 5. 动作 (Action)

*   **功能**: 执行一个预先定义好的、复杂的“动作”。这是插件最强大的功能。
*   **配置字段**: `动作 (Action)`
*   **说明**: “动作”可以让你调用外部 API，处理返回的数据，并根据数据动态生成回复消息。
*   **使用场景**:
    *   创建一个实时查询加密货币价格的按钮。
    *   创建一个能从你的服务器获取状态信息并显示的按钮。
*   **示例**:
    *   **动作**: `获取天气` (你在“动作”标签页中创建的动作)
    *   **效果**: 点击按钮后，执行“获取天气”的流程（请求API -> 解析数据 -> 渲染消息），并更新当前消息。
    *   **详细用法**: 请参阅 **[📄 动作 (Action) 按钮使用指南](./action_buttons.md)**。

### 6. WebApp

*   **功能**: 在 Telegram 应用内部直接打开一个网页应用。
*   **配置字段**: `WebApp`
*   **说明**: 与打开普通链接不同，WebApp 提供了一种无缝的集成体验，网页会在一个从底部弹出的窗口中加载，而不会跳转到外部浏览器。
*   **使用场景**:
    *   展示一个复杂的交互式图表或地图。
    *   提供一个用于机器人后台配置的面板。
    *   嵌入一个小游戏。
*   **示例**:
    *   **WebApp**: `项目文档` (你在“WebApp”标签页中定义的 WebApp)
    *   **效果**: 点击按钮后，在应用内打开该 WebApp 定义的 URL。
    *   **详细用法**: 请参阅 **[🌐 WebApp 按钮使用指南](./webapp_buttons.md)**。

---

## 7. 快速参考表

| 按钮类型 | 主要功能 | 主要配置字段 |
| :--- | :--- | :--- |
| **指令** | 模拟发送一条指令 | `指令内容` |
| **链接** | 打开一个 URL | `链接URL` |
| **子菜单** | 导航到另一个菜单 | `目标菜单` |
| **返回** | （语义上）从子菜单返回 | `目标菜单` |
| **动作** | 执行一个后台动作 (如 API 调用) | `动作` |
| **WebApp** | 在应用内打开一个网页 | `WebApp` |
